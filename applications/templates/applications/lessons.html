{% extends 'applications/layout.html' %}
{% load static %}
{% block links %}
<link rel="stylesheet" href="{% static 'applications/css/lessons.css' %}">
{% endblock %}
{% block title %}Сетка уроков{% endblock %}
{% block styles %}
<style>
    .table {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    border-right: 1px solid black;
    border-bottom: 1px solid black;
    margin: 0;
}

    .day {
    width: -webkit-fill-available;
    border-right: 1px solid black;
    border-bottom: 1px solid black;
    padding: 10px;
}

    .lessons-numbers {
    display: flex;
    justify-content: space-between;
    flex: 1;
}

    .header {
    margin: 0;
}

    .lesson {
    width: -webkit-fill-available;
    border-left: 1px solid black;
    border-bottom: 1px solid black;
}

    .lesson.last-lesson {
    border-right: 2px solid black;
}

    .table *{
    text-align: center;
}

    .grid-head {
    display: flex;
}

    .head-loader {
    width: 72px;
    border-right: 1px solid black;
    border-bottom: 1px solid black;
}

    .wdays {
    display: flex;
    border-right: 1px solid black;
    border-bottom: 1px solid black;
    width: 100%;
}

    .grid-lessons-row {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    height: 70px;
    align-items: stretch;
}

    .grid-lessons-row .cell {
    border-right: 1px solid black;
    border-bottom: 1px solid black;
    display: flex;
    align-items: stretch;
    justify-content: stretch;
    flex-direction: column;
    overflow: hidden;
    flex: 1;
    word-break: break-word;
    font-size: 10px;
}

    .lessons-grid {
    text-align: center;
}

    .grid-lessons .grid-lessons-row {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    height: 70px;
    align-items: stretch;
}
    .caption {
    width: 70px;
    border-right: 1px solid black;
    border-bottom: 1px solid black;
}

    .workloads-interface {
    min-height: 140px;
    width: 89%;
    bottom: 0!important;
    top: auto!important;
    background: var(--second-background);
    border-top: 2px solid black;
    display: flex;
    position: absolute;
}

    .element {
    background-color: cadetblue;
    width: fit-content;
    height: fit-content;
    padding: 5px;
    border-radius: 15px;
    margin-top: 5px;
    margin-left: 5px;
    display: flex;
}

    .draggable{
    background-color: cadetblue;
}

    .border-right {
    border-right: 2px solid black;
}

    .day {
    border-right: 2px solid black;
}


</style>
{% endblock %}
{% block content %}


<div class="features">
    <header>
        <h1>Сетка уроков</h1>
    </header>
    <div class="lesson-grid-header">
        <div class="grid-head">
            <div class="head-loader"></div>
            <div class="table">
                <div class="wdays">
                    {% for day in sched.week_days.all %}
                    {% if day.name == "ПН" %}
                    <div class="day">{{ day.name }}</div>
                    {% endif %}
                    {% if day.name == "ВТ" %}
                    <div class="day">{{ day.name }}</div>
                    {% endif %}
                    {% if day.name == "СР" %}
                    <div class="day">{{ day.name }}</div>
                    {% endif %}
                    {% if day.name == "ЧТ" %}
                    <div class="day">{{ day.name }}</div>
                    {% endif %}
                    {% if day.name == "ПТ" %}
                    <div class="day">{{ day.name }}</div>
                    {% endif %}
                    {% if day.name == "СБ" %}
                    <div class="day">{{ day.name }}</div>
                    {% endif %}
                    {% if day.name == "ВС" %}
                    <div class="day">{{ day.name }}</div>
                    {% endif %}
                    {% endfor %}
                </div>
                <div class="lessons-numbers">
                    <!-- Повторите блок уроков для каждого дня -->
                    {% for i in lessons_days_number %}
                    {% for a in lesson_numbers %}
                    <div class="lesson {% if forloop.last %}last-lesson{% endif %}">{{ a }}</div>
                    {% endfor %}
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>

    <div class="lessons-grid">
        {% for group in groups %}
        <div class="grid-lessons-row">
            <div class="caption">{{ group.title }}</div>
            {% for i in lessons_days_number %}
            {% for a in lesson_numbers %}
            <div class="cell w-{{ i }} d-{{ a }}" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
            {% endfor %}
            <div class="border-right"><!--Полоса разделяющая дни недели--></div>
            {% endfor %}
        </div>
        {% endfor %}
    </div>
    <div class="workloads-interface">
        {% for el in instances %}
        <div class="element">
            <div class="draggable" draggable="true" ondragstart="drag(event)" style="background-color:{{ el.color }}"
                 data="{{ el.id }}">{{ el.subjects }}
            </div>
            | <p>{{ el.lessons_count }}</p>
        </div>
        {% endfor %}

        <div id="workload-info" class="workload-info" style="display:none;">
            <!-- Здесь будет отображаться детальная информация о workload -->
        </div>
    </div>


</div>


{% endblock %}
{% block scripts %}

{% endblock %}
